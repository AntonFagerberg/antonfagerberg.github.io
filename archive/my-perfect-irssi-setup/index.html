<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>My perfect Irssi setup</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/syntax.css">
    </head>
    <body>
      <div id="gradient">&nbsp;</div>
      <div id="header">&nbsp;</div>

      <div id="menu">
        <span class="link-color-0">
            <a href="/">
                Home
            </a>
        </span>
        |
        <span class="link-color-4">
            <a href="/projects">
                Projects
            </a>
        </span>
        |
        <span class="link-color-1">
            <a href="/work">
                Work
            </a>
        </span>
        |
        <span class="link-color-2">
            <a href="/cv">
                CV
            </a>
        </span>
        
        |
        <span class="link-color-3">
            <a href="/contact">
                Contact
            </a>
        </span>
      </div>

      <div class="item">
	<h1>My perfect Irssi setup</h1>
	<h3>Overview</h3>

<ul>
<li>Installation</li>
<li>Basic Irssi usage</li>
<li>Scripts</li>
<li>Themes</li>
<li>BitlBee</li>
<li>Setting up BitlBee with Twitter and Google Talk</li>
<li>Nicklist</li>
<li>Xchat nick color</li>
<li>Hilight window</li>
<li>Advanced Window List</li>
<li>Auto Away</li>
<li>Autoreply (BitlBee)</li>
<li>Status notice (BitlBee)</li>
<li>OTR encryption for Irssi and BitlBee</li>
<li>Notifications</li>
<li>Last.FM</li>
</ul>

<h3>Installation</h3>

<p>This guide focuses on Ubuntu since it is one of the most common Linux distributions. Everything else in the guide is however the same everywhere.</p>

<p>To install everything we need type:</p>

<div class="highlight"><pre><code class="bash">sudo apt-get install irssi bitlbee screen bitlbee-plugin-otr libtime-duration-perl libnotify-bin irssi-plugin-otr</code></pre></div>

<p>This will install the latest version of Irssi, BitlBee 3 and Screen. It is important that you have Backports or you will not get Bitlbee 3 (this statement is probably deprecated). You need screen for the nicklist-script and it is totally awesome on its own so you should learn to use it anyway.</p>

<p>Learn more about Irssi and Screen: <a href="http://quadpoint.org/articles/irssi">quadpoint.org/articles/irssi</a></p>

<p>Now type irssi in your terminal to get going!</p>

<h4>Basic Irssi usage</h4>

<p>All Irssi-commands starts with a forward slash /. You can use the tab-key to auto-complete commands and you can browse through all commands by pressing tab several times.</p>

<p>First of all you should set your nickname:</p>

<div class="highlight"><pre><code class="bash">/nick my-cool-nickname</code></pre></div>

<p>If you want to connect to a IRC-server you can use either /server or /connect. Using /server will kill the old connection (if you have one) but using /connect will establish a new parallel connection so that you can have several active connection.</p>

<p>If you want to auto connect and join channels on start up you can use:</p>

<div class="highlight"><pre><code class="bash">/server ADD -auto -network NetworkName irc.host.com 6667
/channel ADD -auto <span class="c">#channel NetworkName password</span></code></pre></div>

<p>To switch between servers press CTRL + X. To switch between windows / channels press ALT + number or use:</p>

<div class="highlight"><pre><code class="bash">/window number</code></pre></div>

<p>To use the ALT-combination on numbers higher than 10 (which uses key 0) you can use the letters below the numbers on a qwerty-keyboard. ALT+Q = 11, ALT+W = 12 and so forth.</p>

<p>To close a window use:</p>

<div class="highlight"><pre><code class="bash">/wc</code></pre></div>

<p>When you have customized Irssi as you wanted it, execute:</p>

<div class="highlight"><pre><code class="bash">/save</code></pre></div>

<p>This will save all your settings and apply the current theme.</p>

<p><a href="http://irssi.org/documentation/manual%22%3E%20http://irssi.org/documentation/manual">Consult the official manual to get more information about commands and features.</a></p>

<h4>Scripts</h4>

<p>The really great thing about Irssi is that there are thousands of scripts and customizations. I will walk you through my favorite scripts further down.</p>

<p>Irssi scripts are written i Perl and are usually located in ~/.irssi/scripts/. To load a script you can use the /script command:</p>

<div class="highlight"><pre><code class="bash">/script load mycoolscript.pl</code></pre></div>

<p>Or you can auto-load the scripts so you don&#8217;t have to use the script command every time you start Irssi. You can do this by putting the .pl-file in a folder called autorun in the scripts folder ~/.irssi/scripts/autorun/.</p>

<p>You can find a lot of scripts on Irssi&#8217;s official script site:
<a href="http://scripts.irssi.org/">scripts.irssi.org</a>.</p>

<h3>Themes</h3>

<p>There are tons of themes. I use a theme called xchat which you will see in this guide. You can find a lot of themes if you Google for it or visit the official Irssi Theme page: <a href="http://irssi.org/themes">irssi.org/themes</a>.</p>

<p>The xchat theme is located at <a href="http://irssi.org/themefiles/xchat.theme">irssi.org/themefiles/xchat.theme</a>.</p>

<p>To load a theme (located in ~/.irssi/), use:</p>

<div class="highlight"><pre><code class="bash">/set theme xchat</code></pre></div>

<p>Replace xchat with the name of your theme of choice.</p>

<p><img src="/images/tutorials/irssi3.png" alt="irssi overview"></p>

<p>Note that I use a special script with this theme. You can read about it further down.</p>

<h3>Bitlbee</h3>

<p>BitlBee is an &#8220;IRC to other networks gateway&#8221;. This means that you can use other protocols like XMPP/Jabber (used by Google Talk and Facebook chat), MSN Messenger, Yahoo! Messenger, AIM and ICQ from inside an IRC-client like Irssi. You can connect to a public server but there is no hassle setting up your own which means that your information (like passwords and chat records) isn&#8217;t transmitted to any unknown servers.</p>

<p>This guide uses BitlBee 3.0.1 which you can install in Ubuntu Maverick or greater by executing:</p>

<div class="highlight"><pre><code class="bash">sudo apt-get install bitlbee</code></pre></div>

<p>You can control the BitlBee service from your terminal:</p>

<div class="highlight"><pre><code class="bash">sudo service bitlbee <span class="o">{</span>start<span class="p">|</span>stop<span class="p">|</span>restart<span class="p">|</span>force-reload<span class="o">}</span></code></pre></div>

<p>The config file is located at /etc/bitlbee/bitlbee.conf . Look it up and customize it for your own needs. You need to restart the service if you make any changes to the configuration file.</p>

<p>When you are ready to connect to your BitlBee server (and if you haven&#8217;t changed any configurations) execute the following in Irssi:</p>

<div class="highlight"><pre><code class="bash">/connect localhost</code></pre></div>

<p>Once you are connected you should get a channel called BitlBee. This is where your contacts will be located and where you execute all your BitlBee commands. The first thing you should do is to go to the channel and register a new account.</p>

<p>Do this by typing this in the BitlBee channel:</p>

<div class="highlight"><pre><code class="bash">register <span class="o">(</span>password<span class="o">)</span></code></pre></div>

<p>Make sure that you have the nickname which you want to use and note that we want to send command to the Bitlbee-channel and not to Irssi so make sure you don&#8217;t have a / in front of any commands to Bitlbee.</p>

<p>The next time you return to Bitlbee you&#8217;ll use:</p>

<div class="highlight"><pre><code class="bash">identify <span class="o">(</span>password<span class="o">)</span></code></pre></div>

<p>To load all of your accounts.</p>

<p>What we need to do now is to add one of your IM-accounts to Bitlbee. The syntax for this is:</p>

<div class="highlight"><pre><code class="bash">account add <span class="o">(</span>protocol<span class="o">)</span> <span class="o">(</span>username<span class="o">)</span>
/OPER</code></pre></div>

<p>Note that we used the Irssi command /OPER to hide the password instead of typing it directly to BitlBee.</p>

<p>To list all of your accounts:</p>

<div class="highlight"><pre><code class="bash">account list</code></pre></div>

<p>All accounts are numbered and these numbers are used when modifying and connecting etc.</p>

<p>To bring an account online use.</p>

<div class="highlight"><pre><code class="bash">account <span class="o">(</span>number<span class="o">)</span> on</code></pre></div>

<p>If you do not provide any account number all of your accounts will be connected.</p>

<p>There is a help command which you can use if you want to know about the syntax of any of the commands. Usually you&#8217;ll do it in several steps:</p>

<div class="highlight"><pre><code class="bash"><span class="nb">help </span>account
<span class="nb">help </span>account add
<span class="nb">help </span>account add msn</code></pre></div>

<p>You might want want to stript out html-tags from the incoming messages since our client is text based. Do this with the following Bitlbee-command:</p>

<div class="highlight"><pre><code class="bash"><span class="nb">set </span>strip_html <span class="nb">true</span></code></pre></div>

<p>I will guide you how to use Twitter and Google Talk in Bitlbee. You should have no problem adding other accounts the same way.</p>

<h4>Google Talk</h4>

<div class="highlight"><pre><code class="bash">account add jabber <span class="o">(</span>email<span class="o">)</span>
/OPER
account <span class="o">(</span>number<span class="o">)</span> <span class="nb">set </span>server talk.google.com:5223:ssl</code></pre></div>

<p>The account is now ready to be brought online!</p>

<h4>Twitter</h4>

<p>This setup is a bit different since Twitter use OAuth.</p>

<p>Firstly do as normal:</p>

<div class="highlight"><pre><code class="bash">account add twitter <span class="o">(</span>username<span class="o">)</span>
/OPER</code></pre></div>

<p>The new &#8220;twitter user&#8221; will send ju a PM. With a link for the OAuth authentication. Open the link in your browser, sign in and press Allow. Get the numeric code and send it back to the twitter user in the same window.</p>

<p>You should now be signed in to your twitter account. If you like you can rename this or any other user:</p>

<div class="highlight"><pre><code class="bash">rename twitter_username twitter</code></pre></div>

<p>Once signed in a new channel will be open which displays all tweets from your contacts.  Send a message in this channel to post a status update to Twitter.</p>

<h3>Nicklist</h3>

<p>This script places all nicknames in a channel in a bar at the side of the window like many other IRC-channels. You can use it in two ways. None of them is perfect but I prefer using it together with Screen.</p>

<p>You have to start Irssi inside a Gnu Screen session for it to work. You can do this directly from the console by typing:</p>

<div class="highlight"><pre><code class="bash">screen irssi</code></pre></div>

<p>You must specify the script to use Screen from inside Irssi:</p>

<div class="highlight"><pre><code class="bash">/nicklist screen</code></pre></div>

<p>Download: <a href="http://scripts.irssi.org/scripts/nicklist.pl">scripts.irssi.org/scripts/nicklist.pl</a></p>

<p>Learn more about Irssi and Screen: <a href="http://quadpoint.org/articles/irssi">quadpoint.org/articles/irssi</a></p>

<p><img src="/images/tutorials/nicklist2.png" alt="nicklist"></p>

<h3>Xchat nick color</h3>

<p>This script works together with the xchat-theme (as you can find if you scroll up a bit) and does two very important things. First of all, it aligns all nicknames to the right in the chat area which creates a vertical line with the chat messages. This makes it a lot easier to read. And secondly, it will give all nicknames a unique color so it is easier to see who sends what.</p>

<p>Download: <a href="http://dave.waxman.org/irssi/xchatnickcolor.pl">dave.waxman.org/irssi/xchatnickcolor.pl</a></p>

<p><img src="/images/tutorials/irssi_nickcolor1.png" alt="nick color"></p>

<h3>Hilight window</h3>

<p>Every time you get hilighted (someone types your nickname or any other higlighted word or sends you a private message) a copy of that message will be sent to a separate window.</p>

<p>A great option is to display that window on the top of the terminal at all time. That way you&#8217;ll never miss a message.</p>

<div class="highlight"><pre><code class="bash">/window new split
/window name hilight
/window size 4</code></pre></div>

<p>Download: <a href="http://scripts.irssi.org/scripts/hilightwin.pl">scripts.irssi.org/scripts/hilightwin.pl</a></p>

<p>More info: <a href="http://quadpoint.org/articles/irssi#hilight_window">quadpoint.org/articles/irssi#hilight_window</a></p>

<p><img src="/images/tutorials/hilight1.png" alt="hilight"></p>

<h3>Advanced Window List</h3>

<p>AWL customizes the list at the bottom which displays the window list with channels etc.</p>

<p>This is my configuration which I&#8217;ve stoled from the link below:</p>

<div class="highlight"><pre><code class="bash">/set awl_display_key <span class="nv">$Q</span>%K<span class="p">|</span>%n<span class="nv">$H$C$S</span></code></pre></div>

<p>Download: <a href="http://anti.teamidiot.de/static/nei/*/Code/Irssi/adv_windowlist.pl">anti.teamidiot.de/static/nei/*/Code/Irssi/adv_windowlist.pl</a></p>

<p>More info: <a href="http://quadpoint.org/articles/irssi#channel_statusbar_using_advanced_windowlist">quadpoint.org/articles/irssi#channel_statusbar_using_advanced_windowlist</a></p>

<p><img src="/images/tutorials/awl1.png" alt="awl"></p>

<h3>Auto away</h3>

<p>Another script to use together with Screen. It marks you as away when Screen detects that you are not active in the session.</p>

<div class="highlight"><pre><code class="bash">/set screen_away_active ON
/set screen_away_message
/set screen_away_nick</code></pre></div>

<p>Download: <a href="http://scripts.irssi.org/scripts/screen_away.pl">scripts.irssi.org/scripts/screen_away.pl</a></p>

<h3>Auto-reply Bitlbee</h3>

<p>This will reply to all incoming conversation within BitlBee with a custom message when you are away. This of it as an answering machine.</p>

<p>You will need the Perl library time-duration. Ubuntu users can use:</p>

<div class="highlight"><pre><code class="bash">sudo apt-get install libtime-duration-perl</code></pre></div>

<p>And to activate it in Irssi:</p>

<div class="highlight"><pre><code class="bash">/set bitlbee_autoreply_duration ON</code></pre></div>

<p>Download: <a href="https://github.com/msparks/irssiscripts/raw/master/bitlbee_autoreply.pl">github.com/msparks/irssiscripts/raw/master/bitlbee_autoreply.pl</a></p>

<p><img src="/images/tutorials/irssi_autoreply1.png" alt="auto reply"></p>

<h3>Status notice (BitlBee)</h3>

<p>Displays additional information when a users change status such as how long the user was marked as away / offline.</p>

<p>Download: <a href="http://github.com/msparks/irssiscripts/raw/master/bitlbee_status_notice.pl">github.com/msparks/irssiscripts/raw/master/bitlbee_status_notice.pl</a></p>

<p><img src="/images/tutorials/irssi_status_notice1.png" alt="status notice"></p>

<h3>OTR encryption for Irssi &amp; BitlBee</h3>

<p>Installation for Ubuntu users:</p>

<div class="highlight"><pre><code class="bash">sudo apt-get install bitlbee-plugin-otr irssi-plugin-otr</code></pre></div>

<p>You need to load the OTR module inside Irssi:</p>

<div class="highlight"><pre><code class="bash">/LOAD otr</code></pre></div>

<p>If you wish to do it automatically add this to or create the file ~/.irssi/startup:</p>

<div class="highlight"><pre><code class="bash">LOAD otr</code></pre></div>

<p>Note that we do not use forward-slash in this file.</p>

<p>Irssi OTR settings:</p>

<div class="highlight"><pre><code class="bash">Commands:

/otr genkey nick@irc.server.com
  Manually generate a key <span class="k">for </span>the given account<span class="o">(</span>also <span class="k">done </span>on demand<span class="o">)</span>
/otr auth <span class="o">[</span>&lt;nick&gt;@&lt;server&gt;<span class="o">]</span> &lt;secret&gt;
  Initiate or respond to an authentication challenge
/otr authabort <span class="o">[</span>&lt;nick&gt;@&lt;server&gt;<span class="o">]</span>
  Abort any ongoing authentication
/otr trust <span class="o">[</span>&lt;nick&gt;@&lt;server&gt;<span class="o">]</span>
  Trust the fingerprint of the user in the current window.
  You should only <span class="k">do </span>this after comparing fingerprints over a secure line
/otr debug
  Switch debug mode on/off
/otr contexts
  List all OTR contexts along with their fingerprints and status
/otr finish <span class="o">[</span>&lt;nick&gt;@&lt;server&gt;<span class="o">]</span>
  Finish an OTR conversation
/otr version
  Display irc-otr version. Might be a git commit

Settings:

otr_policy
  Comma-separated list of <span class="s2">&quot;&lt;nick&gt;@&lt;server&gt; &lt;policy&gt;&quot;</span> pairs. See comments
  above.
otr_policy_known
  Same syntax as otr_policy. Only applied where a fingerprint is
  available.
otr_ignore
  Conversations with nicks that match this regular expression completely
  bypass libotr. It is very unlikely that you need to touch this setting,
  just use the OTR policy never to prevent OTR sessions with some nicks.
otr_finishonunload
  If <span class="nb">true </span>running OTR sessions are finished on /unload and /quit.
otr_createqueries
  If <span class="nb">true </span>queries are automatically created <span class="k">for </span>OTR log messages.</code></pre></div>

<p>OTR for BitlBee is loaded automatically when installing the Ubuntu package. Use the help command in BitlBee to get information about how to use it:</p>

<div class="highlight"><pre><code class="bash"><span class="nb">help </span>otr</code></pre></div>

<h3>Notifications</h3>

<p>This script provides notifications when you get hilighted via libnotify. In Ubuntu you need to install libnotify-bin:</p>

<div class="highlight"><pre><code class="bash">sudo apt-get install libnotify-bin</code></pre></div>

<p>It works with SSH and GNU Screen but remember to forward X when using SSH with the -X switch.</p>

<p>Download: <a href="http://irssi-libnotify.googlecode.com/svn/trunk/notify.pl">irssi-libnotify.googlecode.com/svn/trunk/notify.pl</a></p>

<p>More info: <a href="http://code.google.com/p/irssi-libnotify/">code.google.com/p/irssi-libnotify</a></p>

<p><img src="/images/tutorials/notification1.png" alt="notification"></p>

<h3>Last.FM</h3>

<p>I use this to show my friends what I&#8217;m listening to. It prints out the last played song from Last.FM.</p>

<p>Set your username:</p>

<div class="highlight"><pre><code class="bash">/set lastfm_user</code></pre></div>

<p>And show what&#8217;s playing:</p>

<div class="highlight"><pre><code class="bash">/np</code></pre></div>

<p>Download: <a href="http://scripts.irssi.org/scripts/lastfm.pl">scripts.irssi.org/scripts/lastfm.pl</a></p>

<h3>Official sites</h3>

<p><a href="http://irssi.org/">irssi.org</a></p>

<p><a href="http://bitlbee.org/">bitlbee.org</a></p>

<p><a href="http://irssi-otr.tuxfamily.org/">irssi-otr.tuxfamily.org</a></p>

<h3>More help</h3>

<p>Official Irssi documentation:
<a href="http://irssi.org/documentation">irssi.org/documentation</a></p>

<p>Official BitlBee wiki:
<a href="http://wiki.bitlbee.org">wiki.bitlbee.org</a></p>

<p>Quadpoint &#8211; the best known Irssi guides:
<a href="http://quadpoint.org/articles/irssi">quadpoint.org/articles/irssi</a></p>

	<!--<span class="notice">29 Mar 2010</span>-->
</div>

      <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-40700896-1', 'antonfagerberg.com');
            ga('send', 'pageview');
        </script>
    </body>
</html>
