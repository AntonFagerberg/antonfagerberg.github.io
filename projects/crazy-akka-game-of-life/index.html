<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Crazy Akka Game of Life</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://www.antonfagerberg.com/projects/crazy-akka-game-of-life/">
</head>

  <body>
    <div id="gradient"></div>

<div id="menu">
  <a href="/">About</a>&nbsp;&nbsp;|&nbsp;
  <a href="/projects">Projects</a>&nbsp;&nbsp;|&nbsp;
  <a href="/texts">Texts</a>&nbsp;&nbsp;|&nbsp;
  <a href="/cv">CV</a>&nbsp;&nbsp;|&nbsp;
  <a href="/contact">Contact</a>
</div>
    <div class="post full">
	<h1>Crazy Akka Game of Life</h1>
	<p>As the title says, this is a crazy implementation of Conway’s Game of Life using Akka and Scala. The goal of this implementation was:</p>

<ul>
  <li>Use a lot of Actors.</li>
  <li>Use lots of Futures.</li>
  <li>Avoid using matrix look-ups for calculating cell neighbours.</li>
  <li>Not be practical or pragmatic.</li>
  <li>(Written before I had any good knowledge about Akka so the design is terrible).</li>
</ul>

<h2 id="how-does-it-work">How does it work?</h2>
<p>First off, we have the World which is the main supervisor Actor. It will create one cell Actor for each cell and one Checker Actor for each Cell.</p>

<p>The purpose of the Cell Actor is to know if it is alive or not - and if you tell it how many alive neighbours it has, it will die or become alive. (For the single purpose of using a GUI, it will also be aware of its X- &amp; Y-coordinate even though this was not the initial plan). The Cells initial status (dead or alive) is set randomly.</p>

<p>Each Checker Actor will have a sequence of Cell ActorRefs (the neighbours of an unknown Cell) and the purpose of the Checker is to count how many of them are alive and report it to the World Actor. The Checkers are not aware of any positions in the grid.</p>

<p>Each iteration goes like this:</p>

<ul>
  <li>World has a collection of all Cells paired with the corresponding Checker.</li>
  <li>World asks all Checkers to find out how many alive Cells are in their sequence and then waits for all of them to respond (via Futures).</li>
  <li>Each Checker asks every Cell it knows if it is alive (via Futures).</li>
  <li>After each Cell has responded, the Checker counts how many are alive and reports the result to the World.</li>
  <li>After all Checkers has responded, the World will tell every Cell how many alive neighbours is has and ask what status it will have the next iteration (via Futures).</li>
  <li>Each Cell will live or die and respond with it to the World along with its coordinate.</li>
  <li>After every Cell has responded, the World will display the result in the GUI and then go again.</li>
</ul>

<h2 id="so-why-is-this-crazy">So why is this crazy?</h2>
<p>Well, since the design is terrible and I didn’t know what I was doing when I wrote it.</p>

<p>I had a go with a grid of 120x75 which results in 18,001 Actors and it worked fine for about 30 seconds before the thread allocation limit was reached and everything crashed (video: <a href="http://instagram.com/p/dMFn6aA7-X/">instagram.com/p/dMFn6aA7-X</a>).</p>

<h2 id="running-it">Running it</h2>
<p>Use SBT:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sbt run</code></pre></div>

<p>Change src/main/scala/Main.scala to adjust the number of rows &amp; columns (default is 10x10). You can also change src/main/resources/Application.conf to adjust the Akka settings with number of threads etc. Note that this is also limited by the JVM and your operating system.</p>

<h2 id="fake-faq">Fake F.A.Q?</h2>
<ul>
  <li>The Actor system doesn’t exit when the GUI does.
 I know, I made the whole GUI / Akka interaction a hack and there are probably a lot of things wrong with it - especially with threads.</li>
</ul>

<h2 id="code">Code</h2>
<p>More information &amp; code on <a href="https://github.com/AntonFagerberg/Crazy-Akka-Game-of-Life">GitHub</a>.</p>

</div>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-40700896-1', 'antonfagerberg.com');
      ga('send', 'pageview');
    </script>
  </body>
</html>